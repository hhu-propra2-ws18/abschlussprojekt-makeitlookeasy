<!DOCTYPE html>
<html lang="en" xmlns:="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
      name="viewport">
  <!-- before: content="width=device-width, initial-scale=1, shrink-to-fit=no" -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta content="" name="description">
  <meta content="" name="author">

  <title>Ausleiherino24</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" th:href="@{~/vendor/bootstrap/css/bootstrap.min.css}">

  <!-- Font awesome Css-->
  <link rel="stylesheet" th:href="@{~/vendor/fontawesome/fonts/font-awesome.min.css}">

  <!-- Custom styles for this template -->
  <link rel="stylesheet" th:href="@{~/css/shop-homepage.css}">

  <!-- Toggle css -->
  <link rel="stylesheet" th:href="@{~/css/toggle.css}">

  <!-- Functions to change view -->
  <script>
    function oneFunction() {
      var mainFrameOne = document.getElementById("mainFrameOne");
      var mainFrameTwo = document.getElementById("mainFrameTwo");
      var mainFrameThree = document.getElementById("mainFrameThree");
      var mainFrameFour = document.getElementById("mainFrameFour");
      var mainFrameFive = document.getElementById("mainFrameFive");

      mainFrameOne.style.display = (
          mainFrameOne.style.display == "block" ? "block" : "block");
      mainFrameTwo.style.display = (
          mainFrameTwo.style.display == "none" ? "none" : "none");
      mainFrameThree.style.display = (
          mainFrameThree.style.display == "none" ? "none" : "none");
      mainFrameFour.style.display = (
          mainFrameFour.style.display == "none" ? "none" : "none");
      mainFrameFive.style.display = (
          mainFrameFive.style.display == "none" ? "none" : "none");

    }

    function twoFunction() {
      var mainFrameOne = document.getElementById("mainFrameOne");
      var mainFrameTwo = document.getElementById("mainFrameTwo");
      var mainFrameThree = document.getElementById("mainFrameThree");
      var mainFrameFour = document.getElementById("mainFrameFour");
      var mainFrameFive = document.getElementById("mainFrameFive");

      mainFrameOne.style.display = (
          mainFrameOne.style.display == "none" ? "none" : "none");
      mainFrameTwo.style.display = (
          mainFrameTwo.style.display == "block" ? "block" : "block");
      mainFrameThree.style.display = (
          mainFrameThree.style.display == "none" ? "none" : "none");
      mainFrameFour.style.display = (
          mainFrameFour.style.display == "none" ? "none" : "none");
      mainFrameFive.style.display = (
          mainFrameFive.style.display == "none" ? "none" : "none");
    }

    function threeFunction() {
      var mainFrameOne = document.getElementById("mainFrameOne");
      var mainFrameTwo = document.getElementById("mainFrameTwo");
      var mainFrameThree = document.getElementById("mainFrameThree");
      var mainFrameFour = document.getElementById("mainFrameFour");
      var mainFrameFive = document.getElementById("mainFrameFive");

      mainFrameOne.style.display = (
          mainFrameOne.style.display == "none" ? "none" : "none");
      mainFrameTwo.style.display = (
          mainFrameTwo.style.display == "none" ? "none" : "none");
      mainFrameThree.style.display = (
          mainFrameThree.style.display == "block" ? "block" : "block");
      mainFrameFour.style.display = (
          mainFrameFour.style.display == "none" ? "none" : "none");
      mainFrameFive.style.display = (
          mainFrameFive.style.display == "none" ? "none" : "none");
    }

    function fourFunction() {
      var mainFrameOne = document.getElementById("mainFrameOne");
      var mainFrameTwo = document.getElementById("mainFrameTwo");
      var mainFrameThree = document.getElementById("mainFrameThree");
      var mainFrameFour = document.getElementById("mainFrameFour");
      var mainFrameFive = document.getElementById("mainFrameFive");

      mainFrameOne.style.display = (
          mainFrameOne.style.display == "none" ? "none" : "none");
      mainFrameTwo.style.display = (
          mainFrameTwo.style.display == "none" ? "none" : "none");
      mainFrameThree.style.display = (
          mainFrameThree.style.display == "none" ? "none" : "none");
      mainFrameFour.style.display = (
          mainFrameFour.style.display == "block" ? "block" : "block");
      mainFrameFive.style.display = (
          mainFrameFive.style.display == "none" ? "none" : "none");
    }

    function fiveFunction() {
      var mainFrameOne = document.getElementById("mainFrameOne");
      var mainFrameTwo = document.getElementById("mainFrameTwo");
      var mainFrameThree = document.getElementById("mainFrameThree");
      var mainFrameFour = document.getElementById("mainFrameFour");
      var mainFrameFive = document.getElementById("mainFrameFive");

      mainFrameOne.style.display = (
          mainFrameOne.style.display == "none" ? "none" : "none");
      mainFrameTwo.style.display = (
          mainFrameTwo.style.display == "none" ? "none" : "none");
      mainFrameThree.style.display = (
          mainFrameThree.style.display == "none" ? "none" : "none");
      mainFrameFour.style.display = (
          mainFrameFour.style.display == "none" ? "none" : "none");
      mainFrameFive.style.display = (
          mainFrameFive.style.display == "block" ? "block" : "block");
    }

  </script>

</head>
<body>
<!-- Navigation -->
<div name="navbar" th:replace="/../fragments/navbar ::navbar"></div>

<div class="container">
  <div class="row">
    <!-- Categories -->
    <div name="categorie" th:replace="/../fragments/categories ::categories"></div>


    <div class="col-lg 9" style="margin-top: 70px">

      <!-- Warnings -->
      <div class="alert alert-danger absolue center alert-dismissible fade show" role="alert"
           th:if="${param.error}">
        An unknown error occurred.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-warning absolue center alert-dismissible fade show" role="alert"
           th:if="${param.alreadyRented}">
        Could not accept article, because its already rented in the requested time.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-danger absolue center alert-dismissible fade show" role="alert"
           th:if="${param.propayUnavailable}">
        Propay is not available.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-warning absolue center alert-dismissible fade show" role="alert"
           th:if="${param.receiverOutOfMoney}">
        The borrower unfortunately has too little money on Propay. We are sorry about that.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-success absolue center alert-dismissible fade show" role="alert"
           th:if="${param.successfullyReturned}">
        The case will be closed. The deposit will be returned.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-success absolue center alert-dismissible fade show" role="alert"
           th:if="${param.openedConflict}">
        A conflict is now open for given case. You will be informed by our employees.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-danger absolue center alert-dismissible fade show" role="alert"
           th:if="${param.conflictFailed}">
        Failed to open a conflict.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-success absolue center alert-dismissible fade show" role="alert"
           th:if="${param.updatedArticle}">
        Article successfully updated.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-warning absolue center alert-dismissible fade show" role="alert"
           th:if="${param.deactivatedArticle}">
        Article successfully deleted.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-danger absolue center alert-dismissible fade show" role="alert"
           th:if="${param.deactivationFailed}">
        This article has open cases. You cannot delete it right now.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="alert alert-warning absolue center alert-dismissible fade show" role="alert"
           th:if="${param.declined}">
        Request declined.
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!--Warnings for outrunning Cases-->
      <div class="alert alert-warning absolue center alert-dismissible fade show" role="alert"
           th:each="case: ${outrunning}"> You have to return
        <a th:href="@{~/article(id=${case.article.id})}"><strong
            th:text="${case.article.name}"></strong></a> on
        <span th:text="${case.getFormattedEndTime()}"></span>
        <button aria-label="Close" class="close" data-dismiss="alert" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>


      <!-- Frame for articles from User-->
      <div id="mainFrameOne"
           th:style="'margin-top: 20px;display:'+${(param.articles!=null || (param.borrowed==null &&
            param.returned==null && param.requests==null))? 'block' : 'none'}">
        <!-- Table for Rental Article -->
        <table class="table">
          <tr>
            <div class="text-center">
              <div class="btn-group">
                <button class="btn btn-dark " onclick="oneFunction()" style="margin-bottom: 10px">My
                  articles
                </button>
                <button class="btn btn-outline-dark" onclick="twoFunction()"
                        style="margin-bottom: 10px">Borrowed
                </button>
                <button class="btn btn-outline-dark" onclick="threeFunction()"
                        style="margin-bottom: 10px">Returned
                </button>
                <button class="btn btn-outline-dark" onclick="fourFunction()"
                        style="margin-bottom: 10px">Requests
                </button>
                <button class="btn btn-outline-dark" onclick="fiveFunction()"
                        style="margin-bottom: 10px">Sold
                </button>
              </div>
            </div>
          </tr>
          <thead>
          <h2 class="text-center">Rentals</h2>
          <tr>
            <th scope="col"></th>
            <th scope="col">Article</th>
            <th scope="col">Price</th>
            <th scope="col">Deposit</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="article: ${myRentalArticles}">
            <td>
              <th:block th:if="${article.forRental==true}">
                <svg height="20" width="20">
                  <circle cx="10" cy="10" fill="green" r="8"></circle>
                </svg>
              </th:block>
              <th:block th:unless="${article.forRental==true}">
                <svg height="20" width="20">
                  <circle cx="10" cy="10" fill="red" r="8"></circle>
                </svg>
              </th:block>
            </td>
            <td><a th:href="@{/article(id=${article.getId()})}"
                   th:text="${article.name}"></a>
            </td>
            <td th:text="${article.costPerDay} + '€'"></td>
            <td th:text="${article.deposit} + '€'"></td>
            <td style="white-space: nowrap">
              <div class="ml-auto flex-md-row">
                <button class="btn btn-primary btn-sm" data-toggle="modal"
                        style="height:30px;width:120px" th:data-target="${'#'+article.id+'article'}"
                        type="button">update Article
                </button>
                <span> </span>
                <button class="btn btn-danger btn-sm" data-toggle="modal"
                        style="height:30px;width:80px" th:data-target="${'#'+article.id+'delete'}"
                        type="button">delete
                </button>

                <!-- Modal -->
                <div aria-hidden="true" aria-labelledby="deleteModalLabel" class="modal fade"
                     role="dialog" tabindex="-1" th:id="${article.id+'delete'}">
                  <div class="modal-dialog" role="document">
                    <form th:action="@{/article/deactivate(id=${article.id})}"
                          th:method="put">
                      <div class="modal-content">
                        <div class="modal-body">
                          <label>Are you sure you want to delete <span
                              th:text="${article.name}"></span>?</label>
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-success" data-dismiss="modal" type="button">No
                          </button>
                          <button class="btn btn-danger" type="submit">Yes</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <!-- Modal -->
                <div aria-hidden="true" aria-labelledby="updateModalLabel" class="modal fade"
                     role="dialog" tabindex="-1" th:id="${article.id+'article'}">
                  <div class="modal-dialog" role="document">
                    <form enctype="multipart/form-data" th:action="@{/article/saveUpdated}"
                          th:method="put">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="updateArticleModalLabel">Update Article</h5>
                          <button aria-label="Close" class="close" data-dismiss="modal"
                                  type="button">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="name">Article
                              name:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input class="form-control" id="name" name="name" required
                                     th:value="${article.name}" type="text">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="price">Cost Per
                              Day:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input class="form-control" id="price" min="0" name="costPerDay"
                                     required
                                     step="0.01" th:value="${article.costPerDay}" type="number">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="deposit">Deposit:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input class="form-control" id="deposit" min="0" name="deposit"
                                     required step="0.01" th:value="${article.deposit}"
                                     type="number">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="category">Category:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <select class="form-control" id="category" name="category"
                                      type="Category">
                                <div th:each="category : ${categories}">
                                  <option th:selected="${article.category == category}"
                                          th:text="|${category.name}|">Motors
                                  </option>
                                </div>
                              </select>
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="description">Description:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <textarea class="form-control" id="description" name="description"
                                        required style="height:150px" th:inline="text"
                                        type="text">[[${article.description}]]</textarea>
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="image">Bild: </label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input accept="image/jpg,image/png,image/jpeg" id="image" name="image"
                                     type="file">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="forRental">Article for
                              Rental:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <label class="switch">
                                <input id="forRental" name="forRental"
                                       th:checked="${article.forRental}" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-secondary" data-dismiss="modal" type="button">
                            Close
                          </button>
                          <button class="btn btn-primary" type="submit">Save</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>

              </div>
            </td>
          </tr>
          </tbody>
        </table>
        <h2 class="text-center">For sale</h2>
        <!-- Table for Sell Article-->
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Status</th>
            <th scope="col">Article</th>
            <th scope="col">Price</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="article: ${mySaleArticles}">
            <td>
              <th:block th:if="${article.forRental==true}">
                <svg height="20" width="20">
                  <circle cx="10" cy="10" fill="green" r="8"></circle>
                </svg>
              </th:block>
              <th:block th:unless="${article.forRental==true}">
                <svg height="20" width="20">
                  <circle cx="10" cy="10" fill="red" r="8"></circle>
                </svg>
              </th:block>
            </td>
            <td><a th:href="@{/article(id=${article.getId()})}"
                   th:text="${article.name}"></a>
            </td>
            <td th:text="${article.costPerDay} + '€'"></td>
            <td style="white-space: nowrap">
              <div class="ml-auto flex-md-row">
                <button class="btn btn-primary btn-sm" data-toggle="modal"
                        style="height:30px;width:120px" th:data-target="${'#'+article.id+'article'}"
                        type="button">update Article
                </button>
                <span> </span>
                <button class="btn btn-danger btn-sm" data-toggle="modal"
                        style="height:30px;width:80px" th:data-target="${'#'+article.id+'delete'}"
                        type="button">delete
                </button>

                <!-- Modal -->
                <div aria-hidden="true" aria-labelledby="deleteModalLabel" class="modal fade"
                     role="dialog" tabindex="-1" th:id="${article.id+'delete'}">
                  <div class="modal-dialog" role="document">
                    <form th:action="@{/article/deactivate(id=${article.id})}" th:method="PUT">>
                      <div class="modal-content">
                        <div class="modal-body">
                          <label>Are you sure you want to delete <span
                              th:text="${article.name}"></span>?</label>
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-success" data-dismiss="modal" type="button">No
                          </button>
                          <button class="btn btn-danger" type="submit">Yes</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <!-- Modal -->
                <div aria-hidden="true" aria-labelledby="updateModalLabel" class="modal fade"
                     role="dialog" tabindex="-1" th:id="${article.id+'article'}">
                  <div class="modal-dialog" role="document">
                    <form enctype="multipart/form-data" method="post"
                          th:action="@{/updateArticle(id=${article.id})}"
                          th:object="${article}">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title" id="updateArticleModalLabel">Update Article</h5>
                          <button aria-label="Close" class="close" data-dismiss="modal"
                                  type="button">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="name">Article
                              name:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input class="form-control" id="name" name="name" required
                                     th:value="${article.name}" type="text">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="price">Price</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input class="form-control" id="price" min="0" name="costPerDay"
                                     required
                                     step="0.01" th:value="${article.costPerDay}" type="number">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="category">Category:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <select class="form-control" id="category" name="category"
                                      type="Category">
                                <div th:each="category : ${categories}">
                                  <option th:selected="${article.category == category}"
                                          th:text="|${category.name}|">Motors
                                  </option>
                                </div>
                              </select>
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="description">Description:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <textarea class="form-control" id="description" name="description"
                                        required style="height:150px" th:inline="text"
                                        type="text">[[${article.description}]]</textarea>
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="image">Bild: </label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <input accept="image/jpg,image/png,image/jpeg" id="image" name="image"
                                     type="file">
                            </div>
                          </div>
                          <div class="form-row form-group">
                            <div class="col-sm-4 label-column"><label class="col-form-label"
                                                                      for="forRental">Article for
                              Rental:</label>
                            </div>
                            <div class="col-sm-6 input-column">
                              <label class="switch">
                                <input id="forRental" name="forRental"
                                       th:checked="${article.forRental}" type="checkbox">
                                <span class="slider round"></span>
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer">
                          <button class="btn btn-secondary" data-dismiss="modal" type="button">
                            Close
                          </button>
                          <button class="btn btn-primary" type="submit">Save</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>

              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Frame for borrowed articles from other users -->
      <div id="mainFrameTwo"
           th:style="'margin-top: 20px;display:'+${(param.borrowed!=null)? 'block' : 'none'}">
        <table class="table">
          <tr>
            <div class="text-center">
              <div class="btn-group">
                <button class="btn btn-outline-dark " onclick="oneFunction()"
                        style="margin-bottom: 10px">My articles
                </button>
                <button class="btn btn-dark" onclick="twoFunction()" style="margin-bottom: 10px">
                  Borrowed
                </button>
                <button class="btn btn-outline-dark" onclick="threeFunction()"
                        style="margin-bottom: 10px"> Returned
                </button>
                <button class="btn btn-outline-dark" onclick="fourFunction()"
                        style="margin-bottom: 10px"> Requests
                </button>
                <button class="btn btn-outline-dark" onclick="fiveFunction()"
                        style="margin-bottom: 10px">Sold
                </button>
              </div>
            </div>
          </tr>
          <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Article</th>
            <th scope="col">From</th>
            <th scope="col">To</th>
            <th scope="col">Costs</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="case: ${borrowed}">
            <td><a th:href="@{~/profile/{username}(username=${case.article.owner.username})}"
                   th:text="${case.article.owner.username}"></a>
            </td>
            <td><a th:href="@{/article(id=${case.article.getId()})}"
                   th:text="${case.article.name}"></a>
            </td>
            <td th:text="${case.getFormattedStartTime()}"></td>
            <td th:text="${case.getFormattedEndTime()}"></td>
            <td th:text="${((case.endTime-case.startTime)/(1000*3600*24)*case.price)+'€'}"></td>
            <td>
              <th:block th:if="${case.requestStatus==1}">
                <button class="btn btn-outline-primary btn-sm disabled"
                        style="height:30px;width:80px">
                  Pending
                </button>
              </th:block>
              <th:block th:if="${case.requestStatus==2}">
                <button class="btn btn-outline-success btn-sm disabled"
                        style="height:30px;width:80px">
                  Accepted
                </button>
              </th:block>
              <th:block th:if="${case.requestStatus==12 || case.requestStatus==4}">
                <button class="btn btn-outline-danger btn-sm disabled"
                        style="height:30px;width:80px">
                  Declined
                </button>
              </th:block>
              <th:block th:if="${case.requestStatus==10}">
                <button class="btn btn-outline-warning btn-sm disabled"
                        style="height:30px;width:80px">Open
                  Conflict
                </button>
              </th:block>
              <th:block th:if="${case.requestStatus==7 || case.requestStatus==8}">
                <button class="btn btn-outline-success btn-sm disabled"
                        style="height:30px;width:80px">
                  Running
                </button>
              </th:block>
              <th:block th:if="${case.requestStatus==14}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-info btn-sm disabled"
                          style="height:30px;width:80px">
                    Finished
                  </button>
                  <span> </span>

                  <!-- Button trigger modal -->
                  <th:block th:if="${case.review==null}">
                    <button class="btn btn-outline-warning btn-sm"
                            data-toggle="modal"
                            style="height:30px;width:80px" th:data-target="${'#'+case.id+'review1'}"
                            type="button">review
                    </button>

                    <!-- Modal -->
                    <div aria-hidden="true" aria-labelledby="reviewModal" class="modal fade"
                         role="dialog" tabindex="-1" th:id="${case.id+'review1'}">
                      <div class="modal-dialog" role="document">
                        <form method="post" th:action="@{~/writeReview(id=${case.id})}">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Review</h5>
                              <button aria-label="Close" class="close" data-dismiss="modal"
                                      type="button">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body text-center">
                              <input class="form-control" name="title"
                                     placeholder="Write a catchy title..."
                                     style="margin-bottom: 10px;">
                              <textarea class="form-control" name="text"
                                        placeholder="Write an awesoome text..."
                                        style="height: 200px"></textarea>
                              <div class="row">
                                <div class="col-lg-12">
                                  <div class="star-rating">
                                    <span class="fa fa-star-o" data-rating="1"></span>
                                    <span class="fa fa-star-o" data-rating="2"></span>
                                    <span class="fa fa-star-o" data-rating="3"></span>
                                    <span class="fa fa-star-o" data-rating="4"></span>
                                    <span class="fa fa-star-o" data-rating="5"></span>
                                    <input class="rating-value" name="stars" type="hidden"
                                           value="2.56">
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <button class="btn btn-secondary" data-dismiss="modal" type="button">
                                Close
                              </button>
                              <button class="btn btn-primary" type="submit">Save review</button>
                            </div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </th:block>
                  <th:block th:unless="${case.review==null}">
                    <button class="btn btn-outline-warning btn-sm"
                            data-toggle="modal"
                            style="height:30px;width:80px" th:data-target="${'#'+case.id+'review2'}"
                            type="button">review
                    </button>

                    <!-- Modal -->
                    <div aria-hidden="true" aria-labelledby="reviewModal" class="modal fade"
                         role="dialog" tabindex="-1" th:id="${case.id+'review2'}">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel"
                                th:text="${case.review.title}">Review</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal"
                                    type="button">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body text-left">
                            <span th:text="${case.review.text}"></span>
                            <div class="row" style="margin-top: 10px;">
                              <div class="col-lg-12">
                                <div class="star-rating">
                                  <span class="fa fa-star-o" data-rating="1"></span>
                                  <span class="fa fa-star-o" data-rating="2"></span>
                                  <span class="fa fa-star-o" data-rating="3"></span>
                                  <span class="fa fa-star-o" data-rating="4"></span>
                                  <span class="fa fa-star-o" data-rating="5"></span>
                                  <input class="rating-value" name="stars" type="hidden"
                                         value="2.56">
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </th:block>


                </div>
              </th:block>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Frame for returned articles from other users -->
      <div id="mainFrameThree"
           th:style="'margin-top: 20px;display:'+${(param.returned!=null)? 'block' : 'none'}">
        <table class="table">
          <tr>
            <div class="text-center">
              <div class="btn-group">
                <button class="btn btn-outline-dark" onclick="oneFunction()"
                        style="margin-bottom: 10px">My articles
                </button>
                <button class="btn btn-outline-dark" onclick="twoFunction()"
                        style="margin-bottom: 10px"> Borrowed
                </button>
                <button class="btn btn-dark" onclick="threeFunction()" style="margin-bottom: 10px">
                  Returned
                </button>
                <button class="btn btn-outline-dark" onclick="fourFunction()"
                        style="margin-bottom: 10px"> Requests
                </button>
                <button class="btn btn-outline-dark" onclick="fiveFunction()"
                        style="margin-bottom: 10px">Sold
                </button>
              </div>
            </div>
          </tr>
          <thead>
          <tr>
            <th scope="col">Borrower</th>
            <th scope="col">Article</th>
            <th scope="col">Return Date</th>
            <th scope="col">Incoming</th>
            <th scope="col">Deposit</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="case:${returned}">
            <td><a th:href="@{~/profile/{username}(username=${case.receiver.username})}"
                   th:text="${case.receiver.username}"></a>
            </td>
            <td><a th:href="@{/article(id=${case.article.getId()})}"
                   th:text="${case.article.name}"></a>
            </td>
            <td th:text="${case.getFormattedEndTime()}"></td>
            <td th:text="${((case.endTime-case.startTime)/(1000*3600*24)*case.price)+'€'}"></td>
            <td th:text="${case.deposit+'€'}"></td>

            <td style="white-space: nowrap">
              <th:block th:if="${case.requestStatus==7 || case.requestStatus==8}">
                <div class="ml-auto flex-md-row">
                  <form method="post" style="display:inline-block"
                        th:action="@{~/acceptCaseReturn(id=${case.id})}">
                    <button class="btn btn-success btn-sm" style="height:30px;width:80px"
                            type="submit">accept
                    </button>
                  </form>
                  <span> </span>

                  <!-- Button trigger modal -->
                  <button class="btn btn-primary btn-sm" data-toggle="modal"
                          style="height:30px;width:80px" th:data-target="${'#'+case.id+'conflict'}"
                          type="button">conflict
                  </button>

                  <!-- Modal -->
                  <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade"
                       role="dialog" tabindex="-1" th:id="${case.id+'conflict'}">
                    <div class="modal-dialog" role="document">
                      <form method="post" th:action="@{~/openconflict(id=${case.id})}">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="conflictModalLabel">Open Conflict</h5>
                            <button aria-label="Close" class="close" data-dismiss="modal"
                                    type="button">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <span>Article: </span> <span th:text="${case.article.name}"></span><br>
                            <span>Borrower: </span> <span
                              th:text="${case.receiver.username}"></span>
                            <textarea class="form-control" maxlength="2048"
                                      minlength="15" name="conflictDescription"
                                      placeholder="What went wrong?"
                                      style="height:300px;margin-top:20px"></textarea>
                          </div>
                          <div class="modal-footer">
                            <button class="btn btn-secondary" data-dismiss="modal" type="button">
                              Close
                            </button>
                            <button class="btn btn-primary" type="submit">Send</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>

                </div>
              </th:block>

              <th:block th:if="${case.requestStatus==10}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-primary btn-sm disabled"
                          style="height:30px;width:120px">
                    Running Conflict
                  </button>
                </div>
              </th:block>

              <th:block th:if="${case.requestStatus==14}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-success btn-sm disabled"
                          style="height:30px;width:80px">
                    Finished
                  </button>
                </div>
              </th:block>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Frame for accepting people to borrow your article -->
      <div id="mainFrameFour"
           th:style="'margin-top: 20px;display:'+${(param.requests!=null)? 'block' : 'none'}">
        <table class="table">
          <tr>
            <div class="text-center">
              <div class="btn-group">
                <button class="btn btn-outline-dark " onclick="oneFunction()"
                        style="margin-bottom: 10px">My articles
                </button>
                <button class="btn btn-outline-dark" onclick="twoFunction()"
                        style="margin-bottom: 10px">Borrowed
                </button>
                <button class="btn btn-outline-dark" onclick="threeFunction()"
                        style="margin-bottom: 10px">Returned
                </button>
                <button class="btn btn-dark" onclick="fourFunction()" style="margin-bottom: 10px">
                  Requests
                </button>
                <button class="btn btn-outline-dark" onclick="fiveFunction()"
                        style="margin-bottom: 10px">Sold
                </button>
              </div>
            </div>
          </tr>
          <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Article</th>
            <th scope="col">From</th>
            <th scope="col">To</th>
            <th scope="col">Profit</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="case:${requested}">
            <td><a th:href="@{~/profile/{username}(username=${case.receiver.username})}"
                   th:text="${case.receiver.username}"></a>
            </td>
            <td><a th:href="@{/article(id=${case.article.getId()})}"
                   th:text="${case.article.name}"></a>
            </td>
            <td th:text="${case.getFormattedStartTime()}"></td>
            <td th:text="${case.getFormattedEndTime()}"></td>
            <td th:text="${((case.endTime-case.startTime)/(1000*3600*24)*case.price)+'€'}"></td>
            <td style="white-space: nowrap">
              <th:block th:if="${case.requestStatus==1}">
                <div class="ml-auto flex-md-row">
                  <form method="post" style="display:inline-block"
                        th:action="@{~/acceptCase(id=${case.id})}">
                    <button class="btn btn-success btn-sm" style="height:30px;width:80px"
                            type="submit">accept
                    </button>
                  </form>
                  <span> </span>
                  <form method="post" style="display:inline-block"
                        th:action="@{~/declineCase(id=${case.id})}">
                    <button class="btn btn-danger btn-sm" style="height:30px;width:80px"
                            type="submit">decline
                    </button>
                  </form>
                </div>
              </th:block>
              <th:block th:if="${case.requestStatus==2}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-success btn-sm disabled"
                          style="height:30px;width:80px">
                    Accepted
                  </button>
                </div>
              </th:block>
              <th:block th:if="${case.requestStatus==12}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-danger btn-sm disabled"
                          style="height:30px;width:80px">
                    Declined
                  </button>
                </div>
              </th:block>
              <th:block th:if="${case.requestStatus==4}">
                <div class="ml-auto flex-md-row">
                  <button class="btn btn-outline-info btn-sm disabled"
                          style="height:30px;width:150px">
                    Rental not possible
                  </button>
                </div>
              </th:block>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <!-- Frame for saled articles -->
      <div id="mainFrameFive"
           th:style="'margin-top: 20px;display:'+${(param.sold!=null)? 'block' : 'none'}">
        <table class="table">
          <tr>
            <div class="text-center">
              <div class="btn-group">
                <button class="btn btn-outline-dark " onclick="oneFunction()"
                        style="margin-bottom: 10px">My articles
                </button>
                <button class="btn btn-outline-dark" onclick="twoFunction()"
                        style="margin-bottom: 10px"> Borrowed
                </button>
                <button class="btn btn-outline-dark" onclick="threeFunction()"
                        style="margin-bottom: 10px"> Returned
                </button>
                <button class="btn btn-outline-dark" onclick="fourFunction()"
                        style="margin-bottom: 10px"> Requests
                </button>
                <button class="btn btn-dark" onclick="fiveFunction()" style="margin-bottom: 10px">
                  Sold
                </button>
              </div>
            </div>
          </tr>
          <thead>
          <tr>
            <th scope="col">Buyer</th>
            <th scope="col">Article</th>
            <th scope="col">Profit</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="case:${sold}">
            <td><a th:href="@{~/profile/{username}(username=${case.receiver.username})}"
                   th:text="${case.receiver.username}"></a>
            </td>
            <td><a th:href="@{/article(id=${case.article.getId()})}"
                   th:text="${case.article.name}"></a>
            </td>
            <td th:text="${case.price+'€'}"></td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


<!-- Footer -->
<div name="footer" th:replace="/../fragments/footer ::footer"></div>

<!-- JS imports -->
<script crossorigin="anonymous"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

<script src="https://rawgit.com/moment/moment/2.2.1/min/moment.min.js"></script>


<script crossorigin="anonymous"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

<script crossorigin="anonymous"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


<script
    crossorigin="anonymous"
    integrity="sha256-5YmaxAwMjIpMrVlK84Y/+NjCpKnFYa8bWWBbUHSBGfU="
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script>
<script>

  var $star_rating = $('.star-rating .fa');

  var SetRatingStar = function () {
    return $star_rating.each(function () {
      if (parseInt($star_rating.siblings('input.rating-value').val()) >= parseInt(
          $(this).data('rating'))) {
        return $(this).removeClass('fa-star-o').addClass('fa-star');
      } else {
        return $(this).removeClass('fa-star').addClass('fa-star-o');
      }
    });
  };

  $star_rating.on('click', function () {
    $star_rating.siblings('input.rating-value').val($(this).data('rating'));
    return SetRatingStar();
  });

  SetRatingStar();
  $(document).ready(function () {

  });
</script>
</body>
</html>
